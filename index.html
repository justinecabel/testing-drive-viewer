
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Gallery (Test Mode)</title>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        #gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 15px; /* A bit more space */
            justify-content: center;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        #gallery img {
            width: 250px;
            height: 250px;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        #gallery img:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }
        #status {
            font-size: 1.2em;
            text-align: center;
            padding-top: 40px;
            color: #555;
        }
    </style>
</head>
<body>

    <h1>My Google Drive Gallery</h1>
    
    <div id="status">Loading test images...</div>
    
    <div id="gallery"></div>


    <script>
        // ---------------------------------------------------------------
        // TODO: PASTE YOUR WEB APP URL HERE WHEN YOU ARE READY
        // ---------------------------------------------------------------
        const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzZ317tI8ZX1sZO99KOZ-JqWOMNaO13RYZv0kOkxWsjbPTYN33dehNp-yQK1ry-qE8A9Q/exec";


        // Get references to the HTML elements
        const galleryContainer = document.getElementById('gallery');
        const statusDisplay = document.getElementById('status');

        /**
         * Helper function to build the gallery from a list of image sources
         * @param {string[]} imageSources - An array of image URLs
         */
        function buildGallery(imageSources) {
            if (!imageSources || imageSources.length === 0) {
                statusDisplay.innerText = "No images found.";
                return;
            }

            // Clear the gallery first
            galleryContainer.innerHTML = '';
            
            // Loop through each source and create an <img> tag
            imageSources.forEach(src => {
                let img = document.createElement('img');
                img.src = src;
                img.alt = 'Gallery image';
                galleryContainer.appendChild(img);
            });
            
            statusDisplay.style.display = 'none'; // Hide status message
        }

        // --- DEVELOPMENT / TEST FUNCTION ---
        /**
         * Loads fake images for local testing.
         */
        // function loadGalleryForTesting() {
        //     console.log("Running in TEST mode.");
        //     statusDisplay.innerText = "Loading test images...";
            
        //     const testImages = [
        //         'https://picsum.photos/250/250?random=1',
        //         'https://picsum.photos/250/250?random=2',
        //         'https://picsum.photos/250/250?random=3',
        //         'https://picsum.photos/250/250?random=4',
        //         'https://picsum.photos/250/250?random=5',
        //         'https://picsum.photos/250/250?random=6'
        //     ];
            
        //     // Simulate a small delay, like a real network request
        //     setTimeout(() => {
        //         buildGallery(testImages);
        //     }, 500);
        // }

        // --- "LIVE" / PRODUCTION FUNCTION ---
        /**
         * Fetches image IDs from your Google Apps Script
         */
        function loadGalleryFromGoogle() {
            console.log("Running in LIVE mode.");
            statusDisplay.innerText = "Loading images from Google Drive...";
            
            fetch(WEB_APP_URL)
                .then(response => response.json())
                .then(imageIds => {
                    // Convert Google Drive IDs into usable image URLs
                    const imageSources = imageIds.map(id => 'https://drive.google.com/drive-viewer/' + id);
                    buildGallery(imageSources);
                })
                .catch(error => {
                    console.error('Error fetching gallery:', error);
                    statusDisplay.innerText = "Error loading gallery. Check console for details.";
                });
        }


        // ---------------------------------------------------------------
        // --- CHOOSE WHICH MODE TO RUN ---
        // ---------------------------------------------------------------
        
        // On page load, run in TEST mode
        // window.onload = loadGalleryForTesting;

        // TODO: When you're ready to go live,
        // comment out the line above and uncomment the line below.
        
        window.onload = loadGalleryFromGoogle;
        
        // ---------------------------------------------------------------

    </script>
</body>
</html>